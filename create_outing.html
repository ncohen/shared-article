

<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
		<link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
		<script src="https://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript" id="jquery"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" id="jquery"></script>
		<script src="https://ss0.4sqi.net/scripts/third_party/jquery.ba-bbq-eddd4adf74d0c1310a401475178c57df.js" type="text/javascript"></script>
		<script src="https://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
		<script src="https://ss1.4sqi.net/scripts/apisamples-35608dc9c26343e74f5d99fc20bae6c5.js" type="text/javascript"></script>
		
		<script src="/javascript/main.js" type="text/javascript"></script>
		<script src="/javascript/create_outing.js" type="text/javascript"></script>

		  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
  		<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<script type="text/javascript">

</script>
<link href="https://ss1.4sqi.net/styles/apisamples-0392cfe95c9fd32087ab6d80fcb80175.css" type="text/css" rel="stylesheet" />

</head>
<body>

<!--
<div id="fb-root"></div>
<script>
  // Additional JS functions here
var friends = [];

function login() {
	FB.login(function(response) {
		if (response.authResponse) {
            // connected
            // testAPI();
            grabFriends();
            // grabFeed();
        } 
        else {
            // cancelled
        }
    });
}

function grabFeed(){
	FB.api('/me/home', function(response) {

		response = response['data'];
		console.log(response.length)
		for(var i = 0; i < response.length; i++){
			console.log(response[i]);
		}
	});
}

function grabFriends(){
	FB.api('/me/friends', function(response) {

		response = response['data'];
		for(var i = 0; i < response.length; i++){
			friend = response[i];
			// $('#friends').append('<p>' + friend.name + '</p>');
			obj = {};
			obj['name'] = friend.name;
			obj['id'] = friend.id;
			friends.push(obj);
		}

		sortFriends();
		setup_friends_dropdown();

		for (var j = 0; j < friends.length; j++){
			user = friends[j];
			url = '/' + user.id;
			console.log(url);

			FB.api(url, { fields:'picture'}, function(response) {
				picture_obj = response.picture;
				// pic = picture_obj['url'];
				console.log(picture_obj['data']['url']);
				friends[j]['avatar'] = picture_obj['data']['url'];
			});		
		}	
		console.log(friends);
	});
}

function sortFriends(){
	friends.sort(function(a, b){
		return a.name.localeCompare(b.name);
	});
}

	function testAPI() {
    	console.log('Welcome!  Fetching your information.... ');
    	FB.api('/me', function(response) {
    	    console.log('Good to see you, ' + response.name + '.');
    	});
	}

  window.fbAsyncInit = function() {
    FB.init({
      appId      : '499837496768287', // App ID
      channelUrl : 'http://singlecalendar.appspot.com', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here

    FB.getLoginStatus(function(response) {
  		if (response.status === 'connected') {
    		// connected
            grabFriends();
            // grabFeed();
           	$('#category').append('<option value="">Friends</option>');


  		} 
  		else if (response.status === 'not_authorized') {
    		// not_authorized
    		login();
  		} 
  		else {
    		// not_logged_in
    		login();
  		}
 	});

  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));


function setup_friends_dropdown(){
  	// $('#category').append('<option value="">Friends</option>');
  	var u = friends;
  	var availableTags = [];
	for (var i = 0; i < u.length; i++) {
	   	$('#category').append('<option class="category" value="' + u[i]['name'] + '">' + u[i]['name'] + '</option>');
	   	
	   	// availableTags.push(u[i]['name']);
    	// $( "#tags" ).autocomplete({
      	// source: availableTags});
	}

	$("#category").chosen();

 	$('#category').change(bind(function() {
		var chosen_friend = $('#category').find('option:selected').val();
	}, this)); 
}

 -->
</script>

<header>
	<nav>
		<a class="nav_item" href="/">Feed</a>
		<a class="nav_item" href="/create">Share</a>
	</nav>
</header>

<h1>Share Article</h1>
	<div class= "input_forms" id="outing_form">
	<form action="/create_new_outing" id="form" enctype="multipart/form-data" method="post">
			<textarea autofocus placeholder="link" name="url" id="tags" rows="1" cols="50"></textarea><br>
			<textarea placeholder="comment" name="post_text" id="post_text" rows="1" cols="50"></textarea><br>
			<textarea placeholder="share with (comma separated)" id="share_participants" name="participants" rows="1" cols="50"></textarea>
		<input name="creator" id="creator" type="hidden" value="{{ user_email|escape }}">
		</input>
		<div><input type="submit" id="submit" value="Share" /></div>
	 </form>
	</div>
<!--
<select id="category"></select>
-->

	<div>
	</div>

<!--	


$(function(){
	document.getElementById('participants').addEventListener('onkeydown',myHandler,false);
	function myHandler(e) {
	if(!e) { e = window.event; }
	console.log('clicked');
	}

	console.log('testing');

	$('#tags').keypress( function(event) {
		console.log("letter " + String.fromCharCode(event.which));
		console.log("field " + String(this.value));
		var a = String(this.value) + String.fromCharCode(event.which);
		console.log("full word = " + a);

		if(a.length > 2){
			autoCompleteVenue(a, bind(handle_autocomplete, this));
		}
	});

	$('#tags').on("autocompleteselect", function(event, ui) {
		console.log(ui.item.value);
		console.log(locations[ui.item.value]);
		var a = locations[ui.item.value];
		grabUrl(a, bind(set_url, this));
	});

});
-->
<script type="text/javascript">
// <![CDATA[

var lift_page = "F677112259372JRCFKL";
// ]]>
</script></body>
</html>